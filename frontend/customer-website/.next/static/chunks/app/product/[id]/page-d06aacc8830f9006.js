(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[188],{2341:function(e,s,t){Promise.resolve().then(t.bind(t,9330))},9330:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var a=t(7437),r=t(2265),l=t(4033),i=t(4193),n=t(2201),c=t(8372);let o=t(2601).env.NEXT_PUBLIC_API_BASE_URL||"https://asha-store-backend.onrender.com";function d(){var e,s,t,d,m,x,u,h,p;let{id:g}=(0,l.useParams)(),b=(0,l.useRouter)(),{addItem:j}=(0,c.useCart)(),[f,v]=(0,r.useState)(null),[N,y]=(0,r.useState)(!0),[w,_]=(0,r.useState)(null),[k,C]=(0,r.useState)(0),[S,F]=(0,r.useState)(1),[z,D]=(0,r.useState)(!1),[A,L]=(0,r.useState)(""),[P,E]=(0,r.useState)("");(0,r.useEffect)(()=>{B()},[g]);let B=async()=>{try{y(!0),_(null);let e=new Date().getTime(),s=await fetch("".concat(o,"/api/v1/products-fixed/").concat(g,"?_t=").concat(e),{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(s.ok){let e=await s.json();console.log("✅ Fetched FRESH product data:",e),console.log("\uD83D\uDCE6 Available sizes:",e.available_sizes),v(e)}else 404===s.status?_("Product not found"):_("Failed to load product")}catch(e){console.error("❌ Error fetching product:",e),_("Failed to load product")}finally{y(!1)}};if(N)return(0,a.jsxs)("div",{className:"min-h-screen bg-warm-white",children:[(0,a.jsx)(i.default,{}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-beige-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-beige-600",children:"Loading product details..."})]})}),(0,a.jsx)(n.default,{})]});if(w)return(0,a.jsxs)("div",{className:"min-h-screen bg-warm-white",children:[(0,a.jsx)(i.default,{}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("h1",{className:"text-2xl font-serif text-beige-800 mb-4",children:w}),(0,a.jsx)("p",{className:"text-beige-600 mb-6",children:"The product you're looking for doesn't exist or has been removed."}),(0,a.jsx)("button",{onClick:()=>b.push("/collections"),className:"bg-beige-700 text-white px-6 py-2 rounded-lg hover:bg-beige-800 transition-colors",children:"Back to Collections"})]})}),(0,a.jsx)(n.default,{})]});if(!f)return(0,a.jsxs)("div",{className:"min-h-screen bg-warm-white",children:[(0,a.jsx)(i.default,{}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("h1",{className:"text-2xl font-serif text-beige-800 mb-4",children:"Product Not Found"}),(0,a.jsx)("button",{onClick:()=>b.push("/collections"),className:"bg-beige-700 text-white px-6 py-2 rounded-lg hover:bg-beige-800 transition-colors",children:"Back to Collections"})]})}),(0,a.jsx)(n.default,{})]});let W=()=>{try{if((null==f?void 0:f.available_sizes)&&Array.isArray(f.available_sizes))return console.log("✅ Using available_sizes from API:",f.available_sizes),f.available_sizes;if(null==f?void 0:f.tags){let e="string"==typeof f.tags?JSON.parse(f.tags):f.tags;if((null==e?void 0:e.available_sizes)&&Array.isArray(e.available_sizes))return console.log("✅ Using available_sizes from tags:",e.available_sizes),e.available_sizes}}catch(e){console.error("❌ Error parsing sizes:",e)}return console.log("⚠️ No available_sizes found"),[]},q=(null==f?void 0:f.stock_quantity)===0,M=(null==f?void 0:f.stock_quantity)||0;return(0,a.jsxs)("div",{className:"min-h-screen bg-warm-white",children:[(0,a.jsx)(i.default,{}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsx)("nav",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,a.jsx)("button",{onClick:()=>b.push("/"),className:"hover:text-primary-brown",children:"Home"}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("button",{onClick:()=>b.push("/collections"),className:"hover:text-primary-brown",children:"Collections"}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("span",{className:"text-primary-brown",children:f.name})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"aspect-[3/4] bg-gray-100 rounded-lg overflow-hidden",children:[f.images&&f.images.length>0?(0,a.jsx)("img",{src:(null===(e=(null===(s=f.images[k])||void 0===s?void 0:s.image_url)||(null===(t=f.images[0])||void 0===t?void 0:t.image_url))||void 0===e?void 0:e.startsWith("http"))?(null===(d=f.images[k])||void 0===d?void 0:d.image_url)||(null===(m=f.images[0])||void 0===m?void 0:m.image_url):"".concat(o).concat((null===(x=f.images[k])||void 0===x?void 0:x.image_url)||(null===(u=f.images[0])||void 0===u?void 0:u.image_url)),alt:(null===(h=f.images[k])||void 0===h?void 0:h.alt_text)||f.name,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,a.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-cream to-warm-white flex items-center justify-center ".concat(f.images&&f.images.length>0?"hidden":""),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-32 h-32 mx-auto mb-4 bg-beige-300 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-16 h-16 text-beige-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,a.jsx)("p",{className:"text-beige-700 font-elegant text-lg",children:f.name}),(0,a.jsx)("p",{className:"text-beige-600 text-sm mt-1",children:"No image uploaded yet"})]})})]})}),f.images&&f.images.length>1&&(0,a.jsx)("div",{className:"flex gap-2",children:f.images.slice(0,5).map((e,s)=>{var t;return(0,a.jsx)("button",{onClick:()=>C(s),className:"w-20 h-20 bg-gray-100 rounded-lg border-2 overflow-hidden ".concat(k===s?"border-beige-700":"border-transparent"),children:(0,a.jsx)("img",{src:(null===(t=e.image_url)||void 0===t?void 0:t.startsWith("http"))?e.image_url:"".concat(o).concat(e.image_url),alt:e.alt_text||f.name,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}})},s)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-serif text-primary-brown mb-2",children:f.name}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-4",children:f.description}),(0,a.jsx)("div",{className:"mb-6",children:f.discounted_price&&parseFloat(f.discounted_price)<parseFloat(f.price)?(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-3xl font-bold text-red-600",children:["₹",parseFloat(f.discounted_price).toLocaleString()]}),(0,a.jsxs)("span",{className:"text-xl text-gray-500 line-through",children:["₹",parseFloat(f.price).toLocaleString()]}),(0,a.jsxs)("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:[Math.round((1-parseFloat(f.discounted_price)/parseFloat(f.price))*100),"% OFF"]})]}):(0,a.jsxs)("span",{className:"text-3xl font-bold text-primary-brown",children:["₹",parseFloat(f.price).toLocaleString()]})}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Key Features:"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:(e=>{let s=[];if(e.tags)try{let t="string"==typeof e.tags?JSON.parse(e.tags):e.tags;t.fabric&&s.push("".concat(t.fabric," Fabric")),t.color&&s.push("".concat(t.color," Color")),t.pattern&&s.push("".concat(t.pattern," Pattern")),t.occasion&&s.push("".concat(t.occasion," Wear")),t.work_type&&s.push("".concat(t.work_type," Work"))}catch(e){console.error("Error parsing tags:",e)}return e.category&&e.category.includes("saree")&&(s.push("Traditional Saree"),s.push("Handcrafted")),0===s.length&&s.push("Premium Quality","Traditional Design","Authentic Craft"),s})(f).map((e,s)=>(0,a.jsx)("li",{children:e},s))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Description:"}),(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed",children:f.description})]}),(0,a.jsxs)("div",{className:"mb-6 bg-white p-4 rounded-lg border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Product Details:"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Category:"})," ",null===(p=f.category)||void 0===p?void 0:p.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())]}),f.brand&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Brand:"})," ",f.brand]}),f.sku&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"SKU:"})," ",f.sku]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Stock:"}),f.stock_quantity>0?(0,a.jsxs)("span",{className:f.stock_quantity<=5?"text-red-600 font-semibold":"",children:[f.stock_quantity," pieces ",f.stock_quantity<=5&&"(Low Stock!)"]}):(0,a.jsx)("span",{className:"text-red-600 font-semibold",children:"Out of Stock"})]})]})]}),(()=>{let e=W();return(console.log("\uD83C\uDFAF Product available sizes:",e),e.length>0)?(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:"Select Size: *"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3",children:e.map(e=>{let s=A===e;return(0,a.jsx)("button",{onClick:()=>{L(e),E("")},className:"\n                              px-6 py-3 min-w-[70px] border-2 rounded-lg font-semibold text-sm transition-all\n                              ".concat(s?"border-primary-brown bg-primary-brown text-white":"border-gray-300 hover:border-primary-brown hover:bg-primary-brown/10","\n                            "),children:e},e)})}),P&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600 font-medium",children:P}),A&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-green-600 font-medium",children:["✓ Selected: ",A]})]}):null})(),(0,a.jsx)("div",{className:"flex items-center gap-4 mb-6",children:q?(0,a.jsx)("button",{disabled:!0,className:"flex-1 bg-gray-400 text-white py-3 rounded-lg cursor-not-allowed font-medium",children:"Out of Stock"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center border rounded-lg",children:[(0,a.jsx)("button",{onClick:()=>F(Math.max(1,S-1)),className:"px-3 py-2 hover:bg-gray-100 disabled:opacity-50",disabled:S<=1,children:"-"}),(0,a.jsx)("span",{className:"px-4 py-2 min-w-[50px] text-center",children:S}),(0,a.jsx)("button",{onClick:()=>F(Math.min(M,S+1)),className:"px-3 py-2 hover:bg-gray-100 disabled:opacity-50",disabled:S>=M,children:"+"})]}),(0,a.jsx)("button",{onClick:()=>{if(W().length>0&&!A){E("Please select a size");return}if(0===f.stock_quantity){alert("Sorry, this product is out of stock!");return}if(S>f.stock_quantity){alert("Sorry, only ".concat(f.stock_quantity," items available in stock!"));return}let e=f.discounted_price&&parseFloat(f.discounted_price)<parseFloat(f.price)?f.discounted_price:f.price;j({...f,price:e,quantity:S,selectedSize:A||null}),D(!0),E(""),setTimeout(()=>{D(!1)},3e3)},className:"flex-1 bg-primary-brown text-white py-3 rounded-lg hover:bg-dark-brown transition-colors font-medium",children:z?"✓ Added to Cart":(()=>{let e=f.discounted_price&&parseFloat(f.discounted_price)<parseFloat(f.price)?f.discounted_price:f.price;return"Add to Cart - ₹".concat((parseFloat(e)*S).toLocaleString())})()}),M<=5&&M>0&&(0,a.jsxs)("div",{className:"text-red-600 text-sm",children:["Only ",M," left!"]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-green-800 mb-2",children:"\uD83D\uDCCF Need Custom Size?"}),(0,a.jsx)("p",{className:"text-sm text-green-700 mb-3",children:"Get perfectly tailored fit! Share your measurements via WhatsApp"}),(0,a.jsxs)("a",{href:"https://wa.me/919818174388?text=".concat(encodeURIComponent("Hi! I'm interested in:\n"+"".concat(f.name,"\n")+"Price: ₹".concat((f.discounted_price&&parseFloat(f.discounted_price)<parseFloat(f.price)?parseFloat(f.discounted_price):parseFloat(f.price)).toLocaleString()).concat(f.discounted_price&&parseFloat(f.discounted_price)<parseFloat(f.price)?" (Sale Price!)":"","\n\n")+"I would like to share my measurements for custom fitting.")),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-full px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-all shadow-md hover:shadow-lg",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"\uD83D\uDCF1 WhatsApp for Custom Measurements"]}),(0,a.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"\uD83D\uDCDE +91 98181 74388 | Available 24/7"}),(0,a.jsx)("p",{className:"text-xs text-green-600",children:"✓ Bust, Waist, Hip, Height, Shoulder, Sleeve length"}),(0,a.jsx)("p",{className:"text-xs text-green-600",children:"✓ We'll guide you through the measurement process"})]})]})]})}),(0,a.jsxs)("div",{className:"bg-cream/30 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Care Instructions:"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-700 space-y-1",children:[(0,a.jsx)("li",{children:"• Dry clean recommended for best results"}),(0,a.jsx)("li",{children:"• Hand wash in cold water if needed"}),(0,a.jsx)("li",{children:"• Store in a cool, dry place"}),(0,a.jsx)("li",{children:"• Iron on medium heat with cloth protection"})]})]})]})]}),(0,a.jsx)("div",{className:"mt-16 text-center",children:(0,a.jsx)("button",{onClick:()=>b.push("/collections"),className:"bg-beige-700 text-white px-8 py-3 rounded-lg hover:bg-beige-800 transition-colors",children:"Browse More Products"})})]}),(0,a.jsx)(n.default,{})]})}}},function(e){e.O(0,[922,640,809,971,938,560],function(){return e(e.s=2341)}),_N_E=e.O()}]);