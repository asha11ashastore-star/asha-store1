(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{129:function(e,t,s){Promise.resolve().then(s.bind(s,3047))},3047:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(7437),a=s(2265),i=s(4640),n=s(9487),o=s(1396),c=s.n(o);function d(e){var t,s,o,d,l,u,m,h,p,x,y;let{params:g}=e,[v,w]=(0,a.useState)(null),[b,f]=(0,a.useState)(!0),[j,N]=(0,a.useState)(""),{isAuthenticated:_}=(0,i.useAuth)();(0,a.useEffect)(()=>{_&&g.id?P():_||f(!1)},[_,g.id]);let P=async()=>{try{let e=await n.Z.getOrder(g.id);w(e)}catch(e){console.error("Error fetching order details:",e),N("Failed to load order details")}finally{f(!1)}};return _?b?(0,r.jsx)("div",{className:"min-h-screen bg-warm-white py-12",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-serif text-primary-brown mb-8",children:"Order Details"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading order details..."})]})})}):j||!v?(0,r.jsx)("div",{className:"min-h-screen bg-warm-white py-12",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-serif text-primary-brown mb-8",children:"Order Details"}),(0,r.jsx)("p",{className:"text-red-600 mb-4",children:j||"Order not found"}),(0,r.jsx)(c(),{href:"/orders",className:"bg-rich-brown text-white px-6 py-3 rounded-lg hover:bg-primary-brown transition-colors",children:"Back to Orders"})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-warm-white py-12",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-serif text-primary-brown",children:"Order Details"}),(0,r.jsx)(c(),{href:"/orders",className:"text-rich-brown hover:text-primary-brown font-medium",children:"← Back to Orders"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Order #",v.id]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Placed on ",new Date(v.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["₹",v.total_amount]}),(0,r.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium mt-2 ".concat("completed"===v.status?"bg-green-100 text-green-800":"processing"===v.status?"bg-yellow-100 text-yellow-800":"shipped"===v.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:v.status.charAt(0).toUpperCase()+v.status.slice(1)})]})]})}),(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Items (",(null===(t=v.items)||void 0===t?void 0:t.length)||0,")"]}),(0,r.jsx)("div",{className:"space-y-4",children:null===(s=v.items)||void 0===s?void 0:s.map(e=>{var t,s,a,i,n;return(0,r.jsxs)("div",{className:"flex items-start space-x-4 p-4 border border-gray-200 rounded-lg",children:[(0,r.jsx)("img",{src:(null===(s=e.product)||void 0===s?void 0:null===(t=s.images)||void 0===t?void 0:t[0])||"/placeholder-product.jpg",alt:null===(a=e.product)||void 0===a?void 0:a.name,className:"w-20 h-20 object-cover rounded-lg"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:null===(i=e.product)||void 0===i?void 0:i.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:null===(n=e.product)||void 0===n?void 0:n.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Qty: ",e.quantity]}),(0,r.jsxs)("span",{className:"font-semibold text-gray-900",children:["₹",e.price]})]})]})]},e.id)})})]}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Shipping Address"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:null===(o=v.shipping_address)||void 0===o?void 0:o.name}),(0,r.jsx)("p",{children:null===(d=v.shipping_address)||void 0===d?void 0:d.address_line_1}),(null===(l=v.shipping_address)||void 0===l?void 0:l.address_line_2)&&(0,r.jsx)("p",{children:v.shipping_address.address_line_2}),(0,r.jsxs)("p",{children:[null===(u=v.shipping_address)||void 0===u?void 0:u.city,", ",null===(m=v.shipping_address)||void 0===m?void 0:m.state," - ",null===(h=v.shipping_address)||void 0===h?void 0:h.pincode]}),(0,r.jsxs)("p",{children:["Phone: ",null===(p=v.shipping_address)||void 0===p?void 0:p.phone]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Order Summary"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,r.jsxs)("span",{className:"text-gray-900",children:["₹",v.subtotal||v.total_amount]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Shipping:"}),(0,r.jsxs)("span",{className:"text-gray-900",children:["₹",v.shipping_cost||0]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Tax:"}),(0,r.jsxs)("span",{className:"text-gray-900",children:["₹",v.tax_amount||0]})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 pt-2 mt-2",children:(0,r.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,r.jsx)("span",{className:"text-gray-900",children:"Total:"}),(0,r.jsxs)("span",{className:"text-gray-900",children:["₹",v.total_amount]})]})})]}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Payment Status:"}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("paid"===v.payment_status?"bg-green-100 text-green-800":"pending"===v.payment_status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:(null===(x=v.payment_status)||void 0===x?void 0:x.charAt(0).toUpperCase())+(null===(y=v.payment_status)||void 0===y?void 0:y.slice(1))||"Pending"})]})})]})]})})]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-warm-white py-12",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-serif text-primary-brown mb-4",children:"Order Details"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"Please log in to view your order details."}),(0,r.jsx)(c(),{href:"/",className:"bg-rich-brown text-white px-6 py-3 rounded-lg hover:bg-primary-brown transition-colors",children:"Go to Home"})]})})})}},4640:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return o},useAuth:function(){return c}});var r=s(7437),a=s(2265),i=s(9487);let n=(0,a.createContext)();function o(e){let{children:t}=e,[s,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{if(i.Z.getToken()){let e=await i.Z.getCurrentUser();o(e)}}catch(e){console.error("Auth check failed:",e),i.Z.logout()}finally{d(!1)}})()},[]);let l=async(e,t)=>{try{await i.Z.login(e,t);let s=await i.Z.getCurrentUser();return o(s),{success:!0,user:s}}catch(e){throw e}},u=async e=>{try{let t=await i.Z.register(e);return{success:!0,data:t}}catch(e){throw e}},m=async()=>{try{await i.Z.logout(),o(null)}catch(e){console.error("Logout error:",e)}};return(0,r.jsx)(n.Provider,{value:{user:s,isLoading:c,login:l,register:u,logout:m,isAuthenticated:!!s},children:t})}function c(){let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},9487:function(e,t,s){"use strict";let r=s(2601).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000";class a{setToken(e){this.token=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getToken(){return this.token?this.token:localStorage.getItem("auth_token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseURL).concat(e),r=this.getToken(),a={headers:{"Content-Type":"application/json",...t.headers},...t};r&&(a.headers.Authorization="Bearer ".concat(r));try{let e=await fetch(s,a),t=await e.json();if(!e.ok){let e="API request failed";throw t.detail?e=Array.isArray(t.detail)?t.detail.map(e=>e.msg).join(", "):t.detail:t.message&&(e=t.message),Error(e)}return t}catch(e){throw console.error("API Error:",e),e}}async login(e,t){try{let s=await this.request("/api/v1/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return s.access_token&&this.setToken(s.access_token),s}catch(e){throw console.error("Login API error:",e),e}}async register(e){return await this.request("/api/v1/auth/register",{method:"POST",body:JSON.stringify(e)})}async logout(){this.setToken(null)}async getCurrentUser(){return await this.request("/api/v1/auth/me")}async getProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return await this.request("/api/v1/products-fixed?".concat(t))}async getAllProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString(),s=await this.request("/api/v1/products/".concat(t?"?"+t:""));return s.items?{data:s.items.map(e=>({...e,status:e.status?e.status.replace("ProductStatus.","").toLowerCase():"draft",category:e.category?e.category.replace("Category.",""):e.category})),...s}:s}async getProduct(e){return await this.request("/api/v1/products/".concat(e))}async searchProducts(e){return await this.request("/api/v1/products/search?q=".concat(encodeURIComponent(e)))}async getCart(){return await this.request("/api/v1/cart")}async addToCart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return await this.request("/api/v1/cart/add",{method:"POST",body:JSON.stringify({product_id:e,quantity:t})})}async updateCartItem(e,t){return await this.request("/api/v1/cart/update/".concat(e),{method:"PUT",body:JSON.stringify({quantity:t})})}async removeFromCart(e){return await this.request("/api/v1/cart/remove/".concat(e),{method:"DELETE"})}async clearCart(){return await this.request("/api/v1/cart/clear",{method:"DELETE"})}async createOrder(e){let t={customer_name:e.customer_name,customer_email:e.customer_email,customer_phone:e.customer_phone,shipping_address:e.shipping_address,notes:e.notes||null,items:e.items.map(e=>({product_id:e.product_id,quantity:e.quantity,unit_price:parseFloat(e.price||e.unit_price)}))};return await this.request("/api/v1/orders/customer",{method:"POST",body:JSON.stringify(t)})}async getOrders(){return await this.request("/api/v1/orders")}async getOrder(e){return await this.request("/api/v1/orders/".concat(e))}async createPaymentOrder(e){return await this.request("/api/v1/payment/create-order",{method:"POST",body:JSON.stringify({order_id:e})})}async verifyPayment(e){return await this.request("/api/v1/payment/verify",{method:"POST",body:JSON.stringify(e)})}async initiatePayment(e){try{let t=await this.createOrder(e),s=await this.createPaymentOrder(t.id);return new Promise((r,a)=>{let i={key:"FVZPTn18225397949705",amount:s.amount,currency:s.currency,name:"Aशा - Grace Woven by Asha Dhaundiyal",description:"Handwoven Sarees & Traditional Wear",order_id:s.razorpay_order_id,handler:async e=>{try{let s=await this.verifyPayment({razorpay_order_id:e.razorpay_order_id,razorpay_payment_id:e.razorpay_payment_id,razorpay_signature:e.razorpay_signature});r({success:!0,order:t,payment:e,verification:s})}catch(e){a({success:!1,error:e.message})}},prefill:{name:e.customer_name||"",email:e.customer_email||"",contact:e.customer_phone||""},theme:{color:"#8B4513"},modal:{ondismiss:()=>{a({success:!1,error:"Payment cancelled by user"})}}};window.Razorpay?new window.Razorpay(i).open():a({success:!1,error:"Razorpay not loaded"})})}catch(e){throw e}}async subscribeNewsletter(e){return await this.request("/api/v1/newsletter/subscribe",{method:"POST",body:JSON.stringify({email:e})})}async submitContactForm(e){return await this.request("/api/v1/contact",{method:"POST",body:JSON.stringify(e)})}constructor(){this.baseURL=r,this.token=null}}let i=new a;t.Z=i}},function(e){e.O(0,[922,971,938,560],function(){return e(e.s=129)}),_N_E=e.O()}]);