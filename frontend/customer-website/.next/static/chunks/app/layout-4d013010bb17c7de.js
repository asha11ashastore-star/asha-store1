(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2601:function(e,t,r){"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(8960)},3600:function(e,t,r){Promise.resolve().then(r.t.bind(r,2445,23)),Promise.resolve().then(r.bind(r,8372)),Promise.resolve().then(r.bind(r,4640)),Promise.resolve().then(r.t.bind(r,6621,23))},8372:function(e,t,r){"use strict";r.r(t),r.d(t,{CartProvider:function(){return a},useCart:function(){return i}});var n=r(7437),o=r(2265);r(9487);let s=(0,o.createContext)();function a(e){let{children:t}=e,[r,a]=(0,o.useState)([]),i=e=>{a(t=>t.filter(t=>t.cartId!==e))};return(0,n.jsx)(s.Provider,{value:{items:r,addItem:e=>{let t=e.stock_quantity||e.stock||0;a(r=>{let n=r.find(t=>t.id===e.id&&t.selectedSize===e.selectedSize),o=e.quantity||1;if(n){let s=n.quantity+o;return s>t?(alert("Cannot add more items. Only ".concat(t," in stock. You already have ").concat(n.quantity," in your cart.")),r):r.map(t=>t.id===e.id&&t.selectedSize===e.selectedSize?{...t,quantity:s}:t)}if(o>t)return alert("Cannot add ".concat(o," items. Only ").concat(t," in stock.")),r;let s="".concat(e.id,"_").concat(e.selectedSize||"nosize","_").concat(Date.now());return[...r,{...e,quantity:o,cartId:s}]})},updateQuantity:(e,t)=>{if(t<=0){i(e);return}a(r=>{let n=r.find(t=>t.cartId===e);if(!n)return r;let o=n.stock_quantity||n.stock||0;return t>o?(alert("Cannot set quantity to ".concat(t,". Only ").concat(o," in stock.")),r):r.map(r=>r.cartId===e?{...r,quantity:t}:r)})},removeItem:i,clearCart:()=>{a([])},getTotal:()=>r.reduce((e,t)=>e+parseFloat(t.price.toString().replace(/[^0-9.]/g,""))*t.quantity,0).toFixed(2)},children:t})}function i(){let e=(0,o.useContext)(s);if(!e)throw Error("useCart must be used within a CartProvider");return e}},4640:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return i},useAuth:function(){return c}});var n=r(7437),o=r(2265),s=r(9487);let a=(0,o.createContext)();function i(e){let{children:t}=e,[r,i]=(0,o.useState)(null),[c,u]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{try{if(s.Z.getToken()){let e=await s.Z.getCurrentUser();i(e)}}catch(e){console.error("Auth check failed:",e),s.Z.logout()}finally{u(!1)}})()},[]);let d=async(e,t)=>{try{await s.Z.login(e,t);let r=await s.Z.getCurrentUser();return i(r),{success:!0,user:r}}catch(e){throw e}},l=async e=>{try{let t=await s.Z.register(e);return{success:!0,data:t}}catch(e){throw e}},h=async()=>{try{await s.Z.logout(),i(null)}catch(e){console.error("Logout error:",e)}};return(0,n.jsx)(a.Provider,{value:{user:r,isLoading:c,login:d,register:l,logout:h,isAuthenticated:!!r},children:t})}function c(){let e=(0,o.useContext)(a);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},9487:function(e,t,r){"use strict";let n=r(2601).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000";class o{setToken(e){this.token=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getToken(){return this.token?this.token:localStorage.getItem("auth_token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseURL).concat(e),n=this.getToken(),o={headers:{"Content-Type":"application/json",...t.headers},...t};n&&(o.headers.Authorization="Bearer ".concat(n));try{let e=await fetch(r,o),t=await e.json();if(!e.ok){let e="API request failed";throw t.detail?e=Array.isArray(t.detail)?t.detail.map(e=>e.msg).join(", "):t.detail:t.message&&(e=t.message),Error(e)}return t}catch(e){throw console.error("API Error:",e),e}}async login(e,t){try{let r=await this.request("/api/v1/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return r.access_token&&this.setToken(r.access_token),r}catch(e){throw console.error("Login API error:",e),e}}async register(e){return await this.request("/api/v1/auth/register",{method:"POST",body:JSON.stringify(e)})}async logout(){this.setToken(null)}async getCurrentUser(){return await this.request("/api/v1/auth/me")}async getProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return await this.request("/api/v1/products-fixed?".concat(t))}async getAllProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString(),r=await this.request("/api/v1/products/".concat(t?"?"+t:""));return r.items?{data:r.items.map(e=>({...e,status:e.status?e.status.replace("ProductStatus.","").toLowerCase():"draft",category:e.category?e.category.replace("Category.",""):e.category})),...r}:r}async getProduct(e){return await this.request("/api/v1/products/".concat(e))}async searchProducts(e){return await this.request("/api/v1/products/search?q=".concat(encodeURIComponent(e)))}async getCart(){return await this.request("/api/v1/cart")}async addToCart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return await this.request("/api/v1/cart/add",{method:"POST",body:JSON.stringify({product_id:e,quantity:t})})}async updateCartItem(e,t){return await this.request("/api/v1/cart/update/".concat(e),{method:"PUT",body:JSON.stringify({quantity:t})})}async removeFromCart(e){return await this.request("/api/v1/cart/remove/".concat(e),{method:"DELETE"})}async clearCart(){return await this.request("/api/v1/cart/clear",{method:"DELETE"})}async createOrder(e){let t={customer_name:e.customer_name,customer_email:e.customer_email,customer_phone:e.customer_phone,shipping_address:e.shipping_address,notes:e.notes||null,items:e.items.map(e=>({product_id:e.product_id,quantity:e.quantity,unit_price:parseFloat(e.price||e.unit_price)}))};return await this.request("/api/v1/orders/customer",{method:"POST",body:JSON.stringify(t)})}async getOrders(){return await this.request("/api/v1/orders")}async getOrder(e){return await this.request("/api/v1/orders/".concat(e))}async createPaymentOrder(e){return await this.request("/api/v1/payment/create-order",{method:"POST",body:JSON.stringify({order_id:e})})}async verifyPayment(e){return await this.request("/api/v1/payment/verify",{method:"POST",body:JSON.stringify(e)})}async initiatePayment(e){try{let t=await this.createOrder(e),r=await this.createPaymentOrder(t.id);return new Promise((n,o)=>{let s={key:"FVZPTn18225397949705",amount:r.amount,currency:r.currency,name:"Aशा - Grace Woven by Asha Dhaundiyal",description:"Handwoven Sarees & Traditional Wear",order_id:r.razorpay_order_id,handler:async e=>{try{let r=await this.verifyPayment({razorpay_order_id:e.razorpay_order_id,razorpay_payment_id:e.razorpay_payment_id,razorpay_signature:e.razorpay_signature});n({success:!0,order:t,payment:e,verification:r})}catch(e){o({success:!1,error:e.message})}},prefill:{name:e.customer_name||"",email:e.customer_email||"",contact:e.customer_phone||""},theme:{color:"#8B4513"},modal:{ondismiss:()=>{o({success:!1,error:"Payment cancelled by user"})}}};window.Razorpay?new window.Razorpay(s).open():o({success:!1,error:"Razorpay not loaded"})})}catch(e){throw e}}async subscribeNewsletter(e){return await this.request("/api/v1/newsletter/subscribe",{method:"POST",body:JSON.stringify({email:e})})}async submitContactForm(e){return await this.request("/api/v1/contact",{method:"POST",body:JSON.stringify(e)})}constructor(){this.baseURL=n,this.token=null}}let s=new o;t.Z=s},2445:function(){throw Error('Module build failed (from ./node_modules/next/dist/compiled/mini-css-extract-plugin/loader.js):\nHookWebpackError: Module build failed (from ./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js):\nSyntaxError\n\n(60:1) /Users/divyanshurathore/shopall/frontend/customer-website/app/globals.css Unknown word\n\n  58 | .border-dark-brown { border-color: var(--dark-brown); }\n  59 | .border-maroon { border-color: var(--maroon); }\n> 60 | // Force rebuild 1763885140\n     | ^\n  61 | \n\n    at tryRunOrWebpackError (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:28:311563)\n    at __webpack_require_module__ (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:28:131195)\n    at __nested_webpack_require_153754__ (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:28:130634)\n    at /Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:28:131487\n    at symbolIterator (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/neo-async/async.js:1:14444)\n    at done (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/neo-async/async.js:1:14824)\n    at Hook.eval [as callAsync] (eval at create (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:13:28867), <anonymous>:15:1)\n    at Hook.CALL_ASYNC_DELEGATE [as _callAsync] (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:13:26021)\n    at /Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:28:130354\n    at symbolIterator (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/neo-async/async.js:1:14402)\n-- inner error --\nError: Module build failed (from ./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js):\nSyntaxError\n\n(60:1) /Users/divyanshurathore/shopall/frontend/customer-website/app/globals.css Unknown word\n\n  58 | .border-dark-brown { border-color: var(--dark-brown); }\n  59 | .border-maroon { border-color: var(--maroon); }\n> 60 | // Force rebuild 1763885140\n     | ^\n  61 | \n\n    at Object.<anonymous> (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[11].oneOf[12].use[2]!/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[11].oneOf[12].use[3]!/Users/divyanshurathore/shopall/frontend/customer-website/app/globals.css:1:7)\n    at /Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:28:915116\n    at Hook.eval [as call] (eval at create (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:13:28645), <anonymous>:7:1)\n    at Hook.CALL_DELEGATE [as _call] (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:13:25915)\n    at /Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:28:131228\n    at tryRunOrWebpackError (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:28:311517)\n    at __webpack_require_module__ (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:28:131195)\n    at __nested_webpack_require_153754__ (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:28:130634)\n    at /Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/webpack/bundle5.js:28:131487\n    at symbolIterator (/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/compiled/neo-async/async.js:1:14444)\n\nGenerated code for /Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[11].oneOf[12].use[2]!/Users/divyanshurathore/shopall/frontend/customer-website/node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[11].oneOf[12].use[3]!/Users/divyanshurathore/shopall/frontend/customer-website/app/globals.css\n1 | throw new Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js):\\nSyntaxError\\n\\n(60:1) /Users/divyanshurathore/shopall/frontend/customer-website/app/globals.css Unknown word\\n\\n  58 | .border-dark-brown { border-color: var(--dark-brown); }\\n  59 | .border-maroon { border-color: var(--maroon); }\\n> 60 | // Force rebuild 1763885140\\n     | ^\\n  61 | \\n");')},6621:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}},8960:function(e){!function(){var t={229:function(e){var t,r,n,o=e.exports={};function s(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c=[],u=!1,d=-1;function l(){u&&n&&(u=!1,n.length?c=n.concat(c):d=-1,c.length&&h())}function h(){if(!u){var e=i(l);u=!0;for(var t=c.length;t;){for(n=c,c=[];++d<t;)n&&n[d].run();d=-1,t=c.length}n=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||u||i(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var s=r[e]={exports:{}},a=!0;try{t[e](s,s.exports,n),a=!1}finally{a&&delete r[e]}return s.exports}n.ab="//";var o=n(229);e.exports=o}()},622:function(e,t,r){"use strict";var n=r(2265),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,s={},u=null,d=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,n)&&!c.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:o,type:e,key:u,ref:d,props:s,_owner:i.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[971,938,560],function(){return e(e.s=3600)}),_N_E=e.O()}]);