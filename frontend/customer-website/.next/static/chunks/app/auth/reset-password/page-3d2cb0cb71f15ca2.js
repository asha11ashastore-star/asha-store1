(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48],{5175:function(e,s,r){Promise.resolve().then(r.bind(r,8462))},8462:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return c}});var t=r(7437),a=r(2265),n=r(4033),l=r(4193),o=r(2201),i=r(2601);function d(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)(),[r,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[h,f]=(0,a.useState)(""),[b,w]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=s.get("token");e?d(e):f("Invalid reset link. Please request a new password reset.")},[s]);let j=async e=>{if(e.preventDefault(),f(""),c.length<8){f("Password must be at least 8 characters long");return}if(c!==m){f("Passwords do not match");return}g(!0);try{let e=i.env.NEXT_PUBLIC_API_BASE_URL||"https://asha-store-backend.onrender.com",s=await fetch("".concat(e,"/api/v1/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,new_password:c})});if(s.ok)w(!0);else{let e=await s.json();f(e.detail||"Failed to reset password. The link may have expired.")}}catch(e){f("An error occurred. Please try again later.")}finally{g(!1)}};return b?(0,t.jsxs)("div",{className:"min-h-screen flex flex-col bg-beige-50",children:[(0,t.jsx)(l.default,{}),(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h1",{className:"text-3xl font-serif text-primary-brown mb-2",children:"Password Reset!"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Your password has been successfully reset."}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-8",children:"You can now login with your new password."})]}),(0,t.jsx)("button",{onClick:()=>e.push("/auth/login"),className:"w-full bg-primary-brown text-white py-3 rounded-lg hover:bg-dark-brown transition-colors font-semibold",children:"Go to Login"})]})})}),(0,t.jsx)(o.default,{})]}):(0,t.jsxs)("div",{className:"min-h-screen flex flex-col bg-beige-50",children:[(0,t.jsx)(l.default,{}),(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-serif text-primary-brown mb-2",children:"Reset Password"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Enter your new password below"})]}),h&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-red-800",children:h})}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,t.jsx)("input",{id:"password",type:"password",required:!0,value:c,onChange:e=>u(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-brown focus:border-transparent",placeholder:"Enter new password (min. 8 characters)",minLength:8})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,t.jsx)("input",{id:"confirmPassword",type:"password",required:!0,value:m,onChange:e=>x(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-brown focus:border-transparent",placeholder:"Confirm new password",minLength:8})]}),(0,t.jsx)("button",{type:"submit",disabled:p||!r,className:"w-full bg-primary-brown text-white py-3 rounded-lg hover:bg-dark-brown transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Resetting Password...":"Reset Password"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)("button",{onClick:()=>e.push("/auth/login"),className:"text-primary-brown hover:underline font-semibold",children:"‚Üê Back to Login"})})]})})}),(0,t.jsx)(o.default,{})]})}function c(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-brown mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}),children:(0,t.jsx)(d,{})})}}},function(e){e.O(0,[922,640,809,971,938,560],function(){return e(e.s=5175)}),_N_E=e.O()}]);