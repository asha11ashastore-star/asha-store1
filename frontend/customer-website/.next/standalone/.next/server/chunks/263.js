exports.id=263,exports.ids=[263],exports.modules={8992:(e,t,r)=>{Promise.resolve().then(r.bind(r,3442))},4244:(e,t,r)=>{Promise.resolve().then(r.bind(r,623)),Promise.resolve().then(r.bind(r,4116))},5696:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},3442:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(5344),a=r(783),o=r.n(a),l=r(8725),n=r(4966);function i(){return(0,s.jsxs)("div",{className:"min-h-screen bg-warm-white",children:[s.jsx(l.default,{}),s.jsx("main",{className:"max-w-7xl mx-auto px-4 py-16",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("div",{className:"w-32 h-32 mx-auto mb-6 bg-primary-brown/10 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-16 h-16 text-primary-brown",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h1",{className:"text-4xl font-serif text-primary-brown mb-4",children:"Page Not Found"}),s.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"The page you're looking for doesn't exist. It might have been moved, deleted, or you entered the wrong URL."})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx(o(),{href:"/collections",className:"inline-block bg-primary-brown text-white px-8 py-3 rounded-lg hover:bg-dark-brown transition-colors font-medium",children:"Browse Collections"}),s.jsx("br",{}),s.jsx(o(),{href:"/",className:"inline-block text-primary-brown hover:underline",children:"Go to Homepage"})]})]})}),s.jsx(n.default,{})]})}},623:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CartProvider:()=>l,useCart:()=>n});var s=r(5344),a=r(3729);r(7087);let o=(0,a.createContext)();function l({children:e}){let[t,r]=(0,a.useState)([]),l=e=>{r(t=>t.filter(t=>t.cartId!==e))};return s.jsx(o.Provider,{value:{items:t,addItem:e=>{let t=e.stock_quantity||e.stock||0;r(r=>{let s=r.find(t=>t.id===e.id&&t.selectedSize===e.selectedSize),a=e.quantity||1;if(s){let o=s.quantity+a;return o>t?(alert(`Cannot add more items. Only ${t} in stock. You already have ${s.quantity} in your cart.`),r):r.map(t=>t.id===e.id&&t.selectedSize===e.selectedSize?{...t,quantity:o}:t)}if(a>t)return alert(`Cannot add ${a} items. Only ${t} in stock.`),r;let o=`${e.id}_${e.selectedSize||"nosize"}_${Date.now()}`;return[...r,{...e,quantity:a,cartId:o}]})},updateQuantity:(e,t)=>{if(t<=0){l(e);return}r(r=>{let s=r.find(t=>t.cartId===e);if(!s)return r;let a=s.stock_quantity||s.stock||0;return t>a?(alert(`Cannot set quantity to ${t}. Only ${a} in stock.`),r):r.map(r=>r.cartId===e?{...r,quantity:t}:r)})},removeItem:l,clearCart:()=>{r([])},getTotal:()=>t.reduce((e,t)=>e+parseFloat(t.price.toString().replace(/[^0-9.]/g,""))*t.quantity,0).toFixed(2)},children:e})}function n(){let e=(0,a.useContext)(o);if(!e)throw Error("useCart must be used within a CartProvider");return e}},4966:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(5344),a=r(783),o=r.n(a),l=r(3729);function n(){let[e,t]=(0,l.useState)(""),[r,a]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1);return s.jsx("footer",{className:"bg-brown-800 text-cream",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,s.jsxs)("div",{className:"col-span-1",children:[s.jsx("h3",{className:"text-2xl font-elegant text-cream mb-4 tracking-widest font-medium",children:"Aशा"}),s.jsx("p",{className:"text-cream/80 mb-4 leading-relaxed",children:"Discover timeless beauty with our curated collection of handwoven sarees and traditional Indian wear."}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[s.jsx("a",{href:"https://www.facebook.com/profile.php?id=61583909454081",target:"_blank",rel:"noopener noreferrer",className:"text-beige-200 hover:text-beige-100 transition-colors",title:"Follow us on Facebook",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),s.jsx("a",{href:"https://www.instagram.com/asha_21131?igsh=bDhzeWp3eXlvY25q",target:"_blank",rel:"noopener noreferrer",className:"text-beige-200 hover:text-beige-100 transition-colors",title:"Follow us on Instagram",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12.017 0C8.396 0 7.929.01 7.262.048 4.85.207 3.285 1.599 2.53 3.45.666 7.806.666 16.207 2.53 20.55c1.595 3.11 4.706 3.45 9.487 3.45 4.782 0 7.893-.34 9.487-3.45 1.864-4.343 1.864-12.744 0-17.1C20.75 1.599 19.185.207 16.773.048 16.106.01 15.639 0 12.017 0zm0 2.17c3.291 0 3.677.014 4.974.072 2.873.128 4.372 1.595 4.502 4.502.058 1.297.072 1.683.072 4.974 0 3.291-.014 3.677-.072 4.974-.13 2.907-1.629 4.374-4.502 4.502-1.297.058-1.683.072-4.974.072-3.291 0-3.677-.014-4.974-.072-2.873-.128-4.372-1.595-4.502-4.502C2.185 15.394 2.17 15.008 2.17 11.717c0-3.291.014-3.677.072-4.974.13-2.907 1.629-4.374 4.502-4.502C8.34 2.185 8.726 2.17 12.017 2.17zm0 3.405c-3.4 0-6.162 2.76-6.162 6.162 0 3.402 2.762 6.162 6.162 6.162 3.402 0 6.162-2.76 6.162-6.162 0-3.402-2.76-6.162-6.162-6.162zM12.017 9.85c1.24 0 2.25 1.01 2.25 2.25s-1.01 2.25-2.25 2.25-2.25-1.01-2.25-2.25 1.01-2.25 2.25-2.25zm4.408-2.533c0 .79-.64 1.43-1.43 1.43-.79 0-1.43-.64-1.43-1.43 0-.79.64-1.43 1.43-1.43.79 0 1.43.64 1.43 1.43z"})})}),s.jsx("a",{href:"https://share.google/liTaFredBEZjVnvPY",target:"_blank",rel:"noopener noreferrer",className:"text-beige-200 hover:text-beige-100 transition-colors",title:"Follow us on Twitter",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"text-lg font-semibold mb-4 text-cream uppercase tracking-wide",children:"QUICK LINKS"}),(0,s.jsxs)("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(o(),{href:"/collections",className:"text-cream/80 hover:text-cream transition-colors",children:"All Collections"})}),s.jsx("li",{children:s.jsx(o(),{href:"/collections?category=saree",className:"text-cream/80 hover:text-cream transition-colors",children:"Sarees"})}),s.jsx("li",{children:s.jsx(o(),{href:"/collections?category=lehenga",className:"text-cream/80 hover:text-cream transition-colors",children:"Lehengas"})}),s.jsx("li",{children:s.jsx(o(),{href:"/collections?category=kurti",className:"text-cream/80 hover:text-cream transition-colors",children:"Kurtis"})})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"text-lg font-semibold mb-4 text-cream uppercase tracking-wide",children:"POLICIES"}),(0,s.jsxs)("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(o(),{href:"/about",className:"text-cream/80 hover:text-cream transition-colors",children:"About Us"})}),s.jsx("li",{children:s.jsx(o(),{href:"/contact",className:"text-cream/80 hover:text-cream transition-colors",children:"Contact Us"})}),s.jsx("li",{children:s.jsx(o(),{href:"/size-guide",className:"text-cream/80 hover:text-cream transition-colors",children:"Size Guide"})}),s.jsx("li",{children:s.jsx(o(),{href:"/shipping",className:"text-cream/80 hover:text-cream transition-colors",children:"Shipping Policy"})}),s.jsx("li",{children:s.jsx(o(),{href:"/returns",className:"text-cream/80 hover:text-cream transition-colors",children:"Return Policy"})})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"text-lg font-semibold mb-4 text-cream uppercase tracking-wide",children:"NEWSLETTER"}),s.jsx("p",{className:"text-cream/80 mb-4",children:"Subscribe to receive updates and exclusive offers"}),r?s.jsx("div",{className:"bg-green-600 text-white p-3 rounded-lg text-center",children:"✓ Thank you for subscribing!"}):(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(!0),setTimeout(()=>{i(!1),a(!0),t(""),setTimeout(()=>{a(!1)},3e3)},1e3)},className:"flex",children:[s.jsx("input",{type:"email",value:e,onChange:e=>t(e.target.value),placeholder:"Your email",required:!0,className:"flex-1 px-3 py-2 bg-white/20 border border-white/30 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-maroon text-white placeholder-white/70"}),s.jsx("button",{type:"submit",disabled:n,className:"bg-maroon text-white px-4 py-2 rounded-r-lg hover:bg-dark-maroon transition-colors uppercase tracking-wider text-sm font-medium disabled:opacity-50",children:n?"Subscribing...":"Subscribe"})]})]})]}),s.jsx("div",{className:"border-t border-brown-700 mt-12 pt-8",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[s.jsx("p",{className:"text-white text-sm",children:"\xa9 2025 Aशा - Grace Woven by Asha Dhaundiyal. All rights reserved."}),(0,s.jsxs)("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[s.jsx(o(),{href:"/privacy",className:"text-white hover:text-gray-200 text-sm transition-colors",children:"Privacy Policy"}),s.jsx(o(),{href:"/terms",className:"text-white hover:text-gray-200 text-sm transition-colors",children:"Terms of Service"})]})]})})]})})}},8725:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(5344),a=r(783),o=r.n(a),l=r(3729);function n({isOpen:e,onClose:t}){let[r,a]=(0,l.useState)(""),[o,n]=(0,l.useState)([]);return((0,l.useEffect)(()=>{r?([{id:1,name:"Silk Saree",price:"₹5,999",image:"/api/placeholder/200/250"},{id:2,name:"Cotton Kurta",price:"₹1,299",image:"/api/placeholder/200/250"},{id:3,name:"Embroidered Lehenga",price:"₹8,999",image:"/api/placeholder/200/250"}].filter(e=>e.name.toLowerCase().includes(r.toLowerCase())),n(o)):n([])},[r]),e)?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex items-start justify-center min-h-screen pt-20 px-4",children:[s.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:t}),s.jsx("div",{className:"relative bg-white w-full max-w-2xl rounded-lg shadow-xl",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-serif",children:"Search Products"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("input",{type:"text",value:r,onChange:e=>a(e.target.value),placeholder:"Search for products...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-beige-600",autoFocus:!0}),o.length>0&&s.jsx("div",{className:"mt-6 grid grid-cols-3 gap-4",children:o.map(e=>(0,s.jsxs)("div",{className:"cursor-pointer hover:opacity-80",children:[s.jsx("div",{className:"bg-gray-100 h-40 rounded-lg mb-2"}),s.jsx("h3",{className:"text-sm font-medium",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.price})]},e.id))}),r&&0===o.length&&s.jsx("p",{className:"text-center text-gray-500 mt-8",children:"No products found"})]})})]})}):null}var i=r(2254),c=r(4116);function d({isOpen:e,onClose:t}){let r=(0,i.useRouter)(),[a,o]=(0,l.useState)(!1),[n,d]=(0,l.useState)(""),[m,u]=(0,l.useState)(""),[h,x]=(0,l.useState)(""),[g,p]=(0,l.useState)(""),[y,b]=(0,l.useState)(""),[f,v]=(0,l.useState)(""),[j,k]=(0,l.useState)(""),[N,w]=(0,l.useState)(!1),{login:C,register:D}=(0,c.useAuth)(),S=async e=>{e.preventDefault(),w(!0),k("");try{await C(n,m),k("Login successful! Welcome back."),setTimeout(()=>{t(),P()},2e3)}catch(e){console.error("Login error:",e),k(`Login failed: ${e.message}`)}finally{w(!1)}},_=async e=>{e.preventDefault(),w(!0),k("");try{await D({email:n,password:m,username:y,first_name:h,last_name:g,phone:f||null,role:"buyer"}),k("Registration successful! You can now login."),setTimeout(()=>{o(!1),P()},2e3)}catch(t){console.error("Registration error:",t),console.error("Error message:",t.message);let e=t.message.toLowerCase();e.includes("email")&&e.includes("already")?(k('Email already registered. Please click "Already have an account? Login" below to sign in.'),setTimeout(()=>{o(!1),k("")},3e3)):e.includes("username")&&e.includes("already")?k("Username already taken. Please choose a different username."):e.includes("unique constraint")||e.includes("duplicate")?e.includes("email")?k("This email is already registered. Please use a different email or login."):e.includes("username")?k("This username is already taken. Please choose a different username."):k("Account with these details already exists. Please try different credentials."):k(`Registration failed: ${t.message}`)}finally{w(!1)}},P=()=>{d(""),u(""),x(""),p(""),b(""),v(""),k("")},E=()=>{P(),o(!1),t()};return e?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4",children:[s.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:t}),s.jsx("div",{className:"relative bg-white w-full max-w-md rounded-lg shadow-xl",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-serif",children:a?"Sign Up":"Login"}),s.jsx("button",{onClick:E,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("form",{onSubmit:a?_:S,className:"space-y-4",children:[a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),s.jsx("input",{type:"text",value:h,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-beige-600",placeholder:"First name",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),s.jsx("input",{type:"text",value:g,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-beige-600",placeholder:"Last name",required:!0})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),s.jsx("input",{type:"text",value:y,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-beige-600",placeholder:"Choose a unique username",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tip: Use your email prefix or add numbers (e.g., sarah_2024)"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone (Optional)"}),s.jsx("input",{type:"tel",value:f,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-beige-600",placeholder:"+91 9999999999"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:n,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-beige-600",placeholder:"Enter your email",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),!a&&s.jsx("button",{type:"button",onClick:()=>{E(),r.push("/auth/forgot-password")},className:"text-xs text-beige-600 hover:underline",style:{color:"#B83C3A"},children:"Forgot Password?"})]}),s.jsx("input",{type:"password",value:m,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-beige-600",placeholder:"Enter your password",minLength:a?8:void 0,required:!0}),a&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long"})]}),j&&s.jsx("p",{className:`text-sm ${j.includes("successful")?"text-green-600":"text-red-600"}`,children:j}),s.jsx("button",{type:"submit",disabled:N,className:"w-full bg-beige-600 text-white py-3 rounded-lg hover:bg-beige-700 transition-colors disabled:opacity-50",style:{backgroundColor:"#B83C3A"},children:N?"Please wait...":a?"Sign Up":"Login"}),s.jsx("div",{className:"text-center",children:s.jsx("button",{type:"button",onClick:()=>o(!a),className:"text-sm text-beige-600 hover:text-beige-700 transition-colors",style:{color:"#B83C3A"},children:a?"Already have an account? Login":"Don't have an account? Sign Up"})}),!a&&(0,s.jsxs)("div",{className:"text-center text-sm text-gray-600",children:[s.jsx("p",{children:'New to Aशा? Click "Sign Up" above to create an account!'}),s.jsx("p",{className:"text-xs mt-1",children:"Join thousands of customers who love our handwoven collection."})]})]})]})})]})}):null}var m=r(623);let u=process.env.NEXT_PUBLIC_API_BASE_URL||"https://asha-store-backend.onrender.com";function h({isOpen:e,onClose:t,onSuccess:r}){let a=(0,i.useRouter)(),{user:o}=(0,c.useAuth)(),{items:n,getTotal:d,clearCart:h}=(0,m.useCart)(),[x,g]=(0,l.useState)(!1),[p,y]=(0,l.useState)(!1),[b,f]=(0,l.useState)({name:"",email:"",phone:"",address:"",city:"",state:"",pinCode:""}),[v,j]=(0,l.useState)({});if(console.log("RAZORPAY_PAYMENT_LINK configured:","https://razorpay.me/@ashadhaundiyal8487"),(0,l.useEffect)(()=>{e&&!o?y(!0):y(!1)},[e,o]),(0,l.useEffect)(()=>{o&&(console.log("\uD83D\uDD04 Syncing checkout form with logged-in user:",o.email),f(e=>({...e,name:o.first_name+(o.last_name?` ${o.last_name}`:""),email:o.email,phone:o.phone||e.phone})))},[o]),!e)return null;let k=()=>{let e={};return b.name.trim()||(e.name="Name is required"),b.email.trim()||(e.email="Email is required"),b.phone.trim()||(e.phone="Phone is required"),b.address.trim()||(e.address="Street address is required"),b.city.trim()||(e.city="City is required"),b.state.trim()||(e.state="State is required"),b.pinCode.trim()||(e.pinCode="PIN code is required"),b.pinCode&&!/^[1-9][0-9]{5}$/.test(b.pinCode)&&(e.pinCode="Please enter a valid 6-digit PIN code"),b.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.email)&&(e.email="Please enter a valid email"),b.phone&&!/^[6-9]\d{9}$/.test(b.phone.replace(/\D/g,""))&&(e.phone="Please enter a valid 10-digit phone number"),j(e),0===Object.keys(e).length},N=async()=>{if(!k()){alert("Please fill in all required fields correctly.");return}g(!0);try{let e=parseFloat(d());if(!e||e<=0)throw Error("Invalid order amount. Please check your cart.");console.log("\uD83D\uDE80 ========== CHECKOUT STARTED =========="),console.log("\uD83D\uDD10 User logged in:",!!o),console.log("\uD83D\uDCE7 User email:",o?.email||"None"),console.log("\uD83D\uDCB0 Total amount:",e),console.log("\uD83D\uDD11 Token in localStorage:",!!localStorage.getItem("auth_token")),console.log("\uD83D\uDC64 User data in localStorage:",!!localStorage.getItem("user_data")),console.log("\uD83D\uDE80 ========================================"),console.log("Creating Payment Link with locked amount:",e);let t=`${b.address}, ${b.city}, ${b.state} - ${b.pinCode}`,r=o?o.email:b.email;console.log("\uD83D\uDD12 Security check - Order will be created with:"),console.log("  Logged-in user:",o?.email||"None"),console.log("  Form email:",b.email),console.log("  Using email:",r),o&&o.email!==b.email&&(console.warn("⚠️ SECURITY WARNING: Form email differs from logged-in user!"),console.warn("  Form had:",b.email),console.warn("  Forcing to use:",o.email));let s={customer_name:b.name,customer_email:r,customer_phone:b.phone,customer_address:t,items:n.map(e=>({product_id:e.id,product_name:e.name,quantity:e.quantity,price:parseFloat(e.price.toString().replace(/[^0-9.]/g,""))})),total_amount:e,notes:"Payment via Razorpay Payment Link",auth_token:localStorage.getItem("auth_token")||null};console.log("Creating Razorpay Payment Link (amount will be LOCKED)..."),console.log("Order data:",s);let a=localStorage.getItem("auth_token"),l=localStorage.getItem("user_data");console.log("\uD83D\uDCBE ========== BACKUP STARTED =========="),console.log("\uD83D\uDCBE BACKUP METHOD 0: Saving order email to persistent storage...");try{localStorage.setItem("pending_payment_email",r),localStorage.setItem("pending_payment_time",Date.now().toString());let e=localStorage.getItem("pending_payment_email");console.log("\uD83D\uDCBE Saved pending payment for:",r),console.log("\uD83D\uDCBE Verification - Read back:",e),e!==r?console.error("❌ ERROR: Email not saved correctly!"):console.log("✅ Email saved and verified!")}catch(e){console.error("❌ CRITICAL ERROR saving pending payment email:",e)}a&&l?(console.log("\uD83D\uDCBE BACKUP METHOD 1: Saving to sessionStorage..."),sessionStorage.setItem("auth_token_backup",a),sessionStorage.setItem("user_data_backup",l),sessionStorage.setItem("last_order_email",r),"true"===sessionStorage.getItem("fresh_account")&&(console.log("\uD83D\uDCBE This is a FRESH account - will preserve after redirect"),sessionStorage.setItem("is_fresh_account_backup","true")),console.log("\uD83D\uDCBE Saved user:",JSON.parse(l).email),console.log("\uD83D\uDCBE BACKUP METHOD 2: Saving to cookies..."),document.cookie=`auth_backup_token=${a}; path=/; max-age=3600; SameSite=Lax`,document.cookie=`auth_backup_user=${encodeURIComponent(l)}; path=/; max-age=3600; SameSite=Lax`,document.cookie=`auth_backup_email=${r}; path=/; max-age=3600; SameSite=Lax`,console.log("\uD83D\uDCBE Saved to cookies (expires in 1 hour)"),console.log("\uD83C\uDF6A Verifying cookies were saved..."),console.log("\uD83C\uDF6A document.cookie:",document.cookie),console.log("\uD83C\uDF6A Cookie contains auth_backup_token:",document.cookie.includes("auth_backup_token")),console.log("\uD83C\uDF6A Cookie contains auth_backup_email:",document.cookie.includes("auth_backup_email"))):(console.log("⚠️ No auth data to backup - guest checkout"),console.log("⚠️ Token exists:",!!a),console.log("⚠️ UserData exists:",!!l)),console.log("\uD83D\uDCBE ========== BACKUP COMPLETED ==========");let i=await fetch(`${u}/api/v1/payment-links/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!i.ok){let e="Failed to create payment link";try{let t=await i.json();console.error("Payment link creation failed:",t),console.error("Response status:",i.status),"string"==typeof t.detail?e=t.detail:Array.isArray(t.detail)?e=t.detail.map(e=>e.msg||e.message||JSON.stringify(e)).join(", "):t.message&&(e=t.message)}catch(t){console.error("Could not parse error response:",t),e=`Server error (${i.status}): ${i.statusText}`}throw Error(e)}let c=await i.json();if(console.log("✅ Payment Link created successfully!"),console.log("Payment Link Data:",JSON.stringify(c,null,2)),!c||!c.short_url||!c.order_number)throw console.error("Invalid payment link response:",c),Error("Invalid payment link response. Please try again.");let m=c.order_number,h=c.short_url;console.log("=".repeat(50)),console.log("\uD83D\uDD12 PAYMENT LINK CREATED (AMOUNT LOCKED!):"),console.log("Order Number:",m),console.log("Total Amount (₹):",e),console.log("Amount in Paise:",c.amount),console.log("Payment Link ID:",c.payment_link_id),console.log("Payment URL (LOCKED):",h),console.log("Status:",c.status),console.log("Expires At:",new Date(1e3*c.expires_at).toLocaleString()),console.log("\uD83D\uDD12 Amount is LOCKED in Razorpay - Customer CANNOT change it!"),console.log("=".repeat(50)),console.log("\uD83D\uDE80 Redirecting to payment page:",h),console.log("Order Number:",m),console.log("Amount: ₹",e,"(LOCKED)"),sessionStorage.setItem("pendingOrder",JSON.stringify({orderNumber:m,totalAmount:e,timestamp:Date.now()})),console.log("⏳ Waiting 500ms for storage operations to complete..."),await new Promise(e=>setTimeout(e,500)),console.log("\uD83D\uDD04 Final verification before redirect:"),console.log("  pending_payment_email:",localStorage.getItem("pending_payment_email")),console.log("  auth_token_backup:",!!sessionStorage.getItem("auth_token_backup")),console.log("  cookies:",document.cookie.includes("auth_backup")),console.log("\uD83D\uDE80 Redirecting to payment page..."),window.location.href=h}catch(t){console.error("=".repeat(50)),console.error("CHECKOUT ERROR:"),console.error("Error message:",t.message),console.error("Error details:",t),console.error("=".repeat(50));let e=t.message||"Failed to process order";e.includes("stock")||e.includes("out of stock")?e+="\n\n\uD83D\uDCA1 Tip: Some items may be out of stock. Please check your cart.":(e.includes("network")||e.includes("fetch"))&&(e+="\n\n\uD83D\uDCA1 Tip: Check your internet connection and try again."),alert(`❌ ORDER FAILED

${e}

Please try again or contact support:
WhatsApp: +91 98181 74388`),g(!1)}},w=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e);return p?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Login Required"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Please login or create an account to place an order. This allows you to track your orders and see your order history."}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("button",{onClick:()=>{t(),a.push("/auth/login")},className:"w-full bg-primary-brown text-white py-3 rounded-lg hover:bg-dark-brown transition-colors font-semibold",children:"Login to Continue"}),s.jsx("button",{onClick:()=>{t(),a.push("/auth/signup")},className:"w-full bg-beige-200 text-primary-brown py-3 rounded-lg hover:bg-beige-300 transition-colors font-semibold",children:"Create New Account"}),s.jsx("button",{onClick:t,className:"w-full text-gray-600 py-2 hover:text-gray-800 transition-colors",children:"Cancel"})]})]})}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"bg-gradient-to-r from-brown-800 to-brown-700 text-white p-4 sm:p-6 rounded-t-lg sticky top-0 z-10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Checkout"}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-3xl sm:text-2xl p-2 -m-2",children:"\xd7"})]})}),(0,s.jsxs)("div",{className:"p-4 sm:p-6 pb-6 sm:pb-8",children:[(0,s.jsxs)("div",{className:"mb-4 sm:mb-6",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Order Summary"}),s.jsx("div",{className:"space-y-2 sm:space-y-3",children:n.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-start sm:items-center border-b pb-2 sm:pb-3 gap-2",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:e.name}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 items-center text-xs sm:text-sm text-gray-600",children:[(0,s.jsxs)("span",{children:["Qty: ",e.quantity]}),e.selectedSize&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{className:"text-gray-400",children:"•"}),(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded bg-brown-100 text-brown-800 font-semibold",children:["Size: ",e.selectedSize]})]})]})]}),s.jsx("p",{className:"font-semibold text-sm sm:text-base whitespace-nowrap",children:w(e.price*e.quantity)})]},e.id))}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-3 sm:mt-4 pt-3 sm:pt-4 border-t-2",children:[s.jsx("p",{className:"text-lg sm:text-xl font-bold",children:"Total"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-maroon",children:w(d())})]})]}),(0,s.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Customer Information"}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),s.jsx("input",{type:"text",value:b.name,onChange:e=>f({...b,name:e.target.value}),className:`w-full px-3 sm:px-4 py-3 sm:py-2 text-base border rounded-lg focus:outline-none focus:ring-2 focus:ring-brown-600 ${v.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter your full name"}),v.name&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email * ",o&&s.jsx("span",{className:"text-xs text-green-600",children:"✓ Verified from your account"})]}),s.jsx("input",{type:"email",value:b.email,onChange:e=>f({...b,email:e.target.value}),readOnly:!!o,disabled:!!o,className:`w-full px-3 sm:px-4 py-3 sm:py-2 text-base border rounded-lg focus:outline-none focus:ring-2 focus:ring-brown-600 ${v.email?"border-red-500":"border-gray-300"} ${o?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"your@email.com",title:o?"Email is locked to your account for security":""}),v.email&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.email}),o&&(0,s.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["\uD83D\uDD12 Order will be linked to your account: ",o.email]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),s.jsx("input",{type:"tel",value:b.phone,onChange:e=>f({...b,phone:e.target.value}),className:`w-full px-3 sm:px-4 py-3 sm:py-2 text-base border rounded-lg focus:outline-none focus:ring-2 focus:ring-brown-600 ${v.phone?"border-red-500":"border-gray-300"}`,placeholder:"10-digit mobile number"}),v.phone&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.phone})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),s.jsx("textarea",{value:b.address,onChange:e=>f({...b,address:e.target.value}),rows:"2",className:`w-full px-3 sm:px-4 py-3 sm:py-2 text-base border rounded-lg focus:outline-none focus:ring-2 focus:ring-brown-600 ${v.address?"border-red-500":"border-gray-300"}`,placeholder:"House/Flat No., Street, Landmark"}),v.address&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.address})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),s.jsx("input",{type:"text",value:b.city,onChange:e=>f({...b,city:e.target.value}),className:`w-full px-3 sm:px-4 py-3 sm:py-2 text-base border rounded-lg focus:outline-none focus:ring-2 focus:ring-brown-600 ${v.city?"border-red-500":"border-gray-300"}`,placeholder:"City"}),v.city&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.city})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),s.jsx("input",{type:"text",value:b.state,onChange:e=>f({...b,state:e.target.value}),className:`w-full px-3 sm:px-4 py-3 sm:py-2 text-base border rounded-lg focus:outline-none focus:ring-2 focus:ring-brown-600 ${v.state?"border-red-500":"border-gray-300"}`,placeholder:"State"}),v.state&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.state})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PIN Code *"}),s.jsx("input",{type:"text",inputMode:"numeric",value:b.pinCode,onChange:e=>f({...b,pinCode:e.target.value}),maxLength:"6",className:`w-full px-3 sm:px-4 py-3 sm:py-2 text-base border rounded-lg focus:outline-none focus:ring-2 focus:ring-brown-600 ${v.pinCode?"border-red-500":"border-gray-300"}`,placeholder:"6-digit PIN code"}),v.pinCode&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.pinCode})]})]}),s.jsx("div",{className:"mt-4 sm:mt-6 p-4 sm:p-5 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-base sm:text-lg font-semibold text-green-800 mb-2",children:"\uD83D\uDCCF Need Custom Size/Measurements?"}),s.jsx("p",{className:"text-sm sm:text-base text-green-700 mb-3",children:"For perfectly tailored fit, share your measurements via WhatsApp"}),(0,s.jsxs)("a",{href:`https://wa.me/919818174388?text=${encodeURIComponent(`Hi! I want to order:
`+n.map(e=>`${e.name} (₹${e.price} \xd7 ${e.quantity})`).join("\n")+`

I would like to share my measurements for custom fitting.
`+`My details:
`+`Name: ${b.name||"[Please fill]"}
`+`Phone: ${b.phone||"[Please fill]"}`)}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 sm:px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-all shadow-md hover:shadow-lg text-sm sm:text-base",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp Measurements"]}),s.jsx("p",{className:"text-xs sm:text-sm text-green-600 mt-3 font-medium",children:"\uD83D\uDCDE +91 98181 74388 | Available 24/7"}),s.jsx("p",{className:"text-xs text-green-600 mt-1",children:"✓ Share bust, waist, hip, height & other measurements"})]})]})}),(0,s.jsxs)("div",{className:"mt-6 sm:mt-8 pt-4 sm:pt-6 border-t-2 border-gray-200 sticky bottom-0 bg-white pb-2",children:[s.jsx("button",{onClick:N,disabled:x,className:"w-full text-white py-4 sm:py-4 rounded-lg font-semibold text-base sm:text-lg hover:opacity-90 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",style:{background:"linear-gradient(to right, #B83C3A, #8B1A1A)",minHeight:"56px"},children:x?"Creating Order...":"\uD83D\uDD12 Proceed to Payment"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center mt-2 sm:mt-3",children:"\uD83D\uDD12 Secure payment via Razorpay.me"}),s.jsx("p",{className:"text-xs text-gray-400 text-center mt-1",children:"You'll be redirected to Razorpay payment page"})]})]})]})})}function x({isOpen:e,onClose:t}){let{items:r,updateQuantity:a,removeItem:o,getTotal:n}=(0,m.useCart)(),[i,c]=(0,l.useState)(!1);return e?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-start justify-center min-h-screen pt-20 px-4",children:[s.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:t}),s.jsx("div",{className:"relative bg-white w-full max-w-md rounded-lg shadow-xl",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-serif",children:"Shopping Cart"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),0===r.length?s.jsx("p",{className:"text-center text-gray-500 py-8",children:"Your cart is empty"}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:r.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-4 pb-4 border-b",children:[s.jsx("div",{className:"w-20 h-24 bg-gray-100 rounded"}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["₹",e.price]}),e.selectedSize&&s.jsx("p",{className:"text-xs mt-1",children:(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded bg-brown-100 text-brown-800 font-semibold",children:["Size: ",e.selectedSize]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx("button",{onClick:()=>a(e.cartId,e.quantity-1),className:"w-6 h-6 border rounded hover:bg-gray-100",children:"-"}),s.jsx("span",{className:"text-sm",children:e.quantity}),s.jsx("button",{onClick:()=>{if(e.stock_quantity&&e.quantity>=e.stock_quantity){alert(`Only ${e.stock_quantity} items available in stock!`);return}a(e.cartId,e.quantity+1)},className:"w-6 h-6 border rounded hover:bg-gray-100",children:"+"}),s.jsx("button",{onClick:()=>o(e.cartId),className:"ml-4 text-red-500 text-sm hover:underline",children:"Remove"})]}),e.stock_quantity&&e.stock_quantity<=5&&(0,s.jsxs)("p",{className:"text-xs text-red-600 mt-1",children:["Only ",e.stock_quantity," left in stock!"]})]})]},e.cartId))}),(0,s.jsxs)("div",{className:"mt-6 pt-4 border-t",children:[(0,s.jsxs)("div",{className:"flex justify-between text-lg font-medium",children:[s.jsx("span",{children:"Total"}),(0,s.jsxs)("span",{children:["₹",n()]})]}),s.jsx("button",{onClick:()=>c(!0),className:"w-full mt-4 bg-primary-brown text-white py-3 rounded-lg hover:bg-dark-brown transition-colors",children:"Proceed to Checkout"})]})]})]})})]}),s.jsx(h,{isOpen:i,onClose:()=>c(!1),onSuccess:e=>{alert(`Payment successful! Order ID: ${e.order.order_number}`),c(!1)}})]}):null}function g(){let[e,t]=(0,l.useState)(!1),[r,a]=(0,l.useState)(!1),[i,u]=(0,l.useState)(!1),[h,g]=(0,l.useState)(!1),[p,y]=(0,l.useState)(!1),[b,f]=(0,l.useState)(!1),{items:v}=(0,m.useCart)(),{user:j,isAuthenticated:k,logout:N}=(0,c.useAuth)(),w=v.reduce((e,t)=>e+t.quantity,0),C=(0,l.useRef)(null),D=async()=>{await N(),y(!1)};return(0,l.useEffect)(()=>{function e(e){C.current&&!C.current.contains(e.target)&&y(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{className:"bg-cream",children:[s.jsx("div",{className:"border-b border-primary-brown/20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center min-w-[80px]",children:[s.jsx("button",{onClick:()=>f(!b),className:"md:hidden text-rich-brown hover:text-primary-brown transition-colors p-1",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),s.jsx("button",{onClick:()=>t(!0),className:"hidden md:block text-rich-brown hover:text-primary-brown transition-colors p-1",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),s.jsx("div",{className:"flex flex-col items-center",children:(0,s.jsxs)(o(),{href:"/",className:"text-center",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-elegant font-medium tracking-widest",style:{color:"#8B2E2E"},children:"Aशा"}),s.jsx("p",{className:"text-xs md:text-sm mt-1 md:mt-2 font-sans tracking-wide font-normal",style:{color:"#A89878"},children:"Grace Woven by Asha Dhaundiyal"})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-3 min-w-[80px]",children:[s.jsx("div",{className:"relative",ref:C,children:k?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>y(!p),className:"text-rich-brown hover:text-primary-brown transition-colors flex items-center space-x-1 p-1",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${p?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,s.jsxs)("div",{className:`absolute right-0 top-full mt-2 w-48 bg-white shadow-xl border border-gray-200 rounded-lg transition-all duration-200 z-50 ${p?"opacity-100 visible":"opacity-0 invisible"}`,children:[(0,s.jsxs)("div",{className:"p-3 border-b border-gray-200",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:j?.name||"User"}),s.jsx("p",{className:"text-xs text-gray-600",children:j?.email})]}),(0,s.jsxs)("div",{className:"py-2",children:[s.jsx(o(),{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>y(!1),children:"My Orders"}),s.jsx(o(),{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>y(!1),children:"My Profile"}),s.jsx("button",{onClick:D,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Logout"})]})]})]}):s.jsx("button",{onClick:()=>a(!0),className:"text-rich-brown hover:text-primary-brown transition-colors p-1",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),(0,s.jsxs)("button",{onClick:()=>u(!0),className:"text-rich-brown hover:text-primary-brown transition-colors relative p-1",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),w>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:w})]})]})]})})}),s.jsx("nav",{className:"hidden md:block border-b border-primary-brown/20 bg-primary-brown",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex justify-center space-x-8 py-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{className:"text-cream hover:text-white text-sm tracking-wider flex items-center font-medium",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:["SAREES",s.jsx("svg",{className:`w-4 h-4 ml-1 transition-transform duration-200 ${h?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 top-full mt-2 w-[600px] bg-white shadow-xl border border-gray-200 transition-all duration-200 z-50 ${h?"opacity-100 visible":"opacity-0 invisible"}`,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3 text-sm",children:"ALL SAREES"}),s.jsx(o(),{href:"/collections?category=saree",className:"block text-gray-600 hover:text-gray-900 text-sm mb-2",children:"View All Sarees"})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3 text-sm",children:"SHOP BY FABRIC"}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(o(),{href:"/collections?category=cotton_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Cotton"}),s.jsx(o(),{href:"/collections?category=silk_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Silk"}),s.jsx(o(),{href:"/collections?category=linen_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Linen"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3 text-sm",children:"SHOP BY WEAVE"}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(o(),{href:"/collections?category=kantha_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Kantha"}),s.jsx(o(),{href:"/collections?category=jamdani_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Jamdani"}),s.jsx(o(),{href:"/collections?category=handloom_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Handloom"}),s.jsx(o(),{href:"/collections?category=shibori_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Tie N Dye (Shibori)"}),s.jsx(o(),{href:"/collections?category=handblock_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Handblock"}),s.jsx(o(),{href:"/collections?category=batik_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Batik"}),s.jsx(o(),{href:"/collections?category=ajrakh_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Ajrakh"}),s.jsx(o(),{href:"/collections?category=khadi_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Khadi"}),s.jsx(o(),{href:"/collections?category=tissue_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Tissue"}),s.jsx(o(),{href:"/collections?category=jacquard_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Jacquard"}),s.jsx(o(),{href:"/collections?category=kota_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Kota"})]})]})]}),(0,s.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3 text-sm",children:"SHOP BY VARIETY"}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[s.jsx(o(),{href:"/collections?category=handloom_cotton_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Handloom Cotton"}),s.jsx(o(),{href:"/collections?category=tangail_cotton_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Tangail Cotton"}),s.jsx(o(),{href:"/collections?category=handloom_silk_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Handloom Silk"}),s.jsx(o(),{href:"/collections?category=matka_silk_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Matka Silk"}),s.jsx(o(),{href:"/collections?category=tussar_silk_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Tussar Silk"}),s.jsx(o(),{href:"/collections?category=muslin_silk_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Muslin Silk"}),s.jsx(o(),{href:"/collections?category=katan_silk_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Katan Silk"}),s.jsx(o(),{href:"/collections?category=dhakil_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Dhakil"}),s.jsx(o(),{href:"/collections?category=mulberry_silk_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Mulberry Silk"}),s.jsx(o(),{href:"/collections?category=dhonekali_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Dhonekali"}),s.jsx(o(),{href:"/collections?category=satin_silk_saree",className:"block text-gray-600 hover:text-gray-900 text-sm",children:"Satin Silk"})]})]}),(0,s.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3 text-sm",children:"PRICE RANGE"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("select",{className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[s.jsx("option",{value:"0",children:"₹0"}),s.jsx("option",{value:"1000",children:"₹1,000"}),s.jsx("option",{value:"2000",children:"₹2,000"}),s.jsx("option",{value:"5000",children:"₹5,000"})]}),s.jsx("span",{className:"text-gray-500",children:"to"}),(0,s.jsxs)("select",{className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[s.jsx("option",{value:"10000",children:"₹10,000"}),s.jsx("option",{value:"20000",children:"₹20,000"}),s.jsx("option",{value:"50000",children:"₹50,000"}),s.jsx("option",{value:"100000",children:"₹1,00,000+"})]})]}),s.jsx("button",{className:"mt-3 px-4 py-2 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors",children:"CLEAR FILTERS"})]})]})})]}),s.jsx(o(),{href:"/collections?category=kurti",className:"text-cream hover:text-white text-sm tracking-wider font-medium",children:"KURTA SET"}),s.jsx(o(),{href:"/collections?category=dupatta",className:"text-cream hover:text-white text-sm tracking-wider font-medium",children:"DUPATTA & STOLES"}),s.jsx(o(),{href:"/sale",className:"text-cream hover:text-white text-sm tracking-wider font-medium",children:"SALE"})]})})}),s.jsx("div",{className:`md:hidden bg-white border-t border-gray-200 transition-all duration-300 ease-in-out ${b?"max-h-[calc(100vh-200px)] overflow-y-auto":"max-h-0 overflow-hidden"}`,children:(0,s.jsxs)("div",{className:"px-4 py-4 pb-8 space-y-4",children:[(0,s.jsxs)("button",{onClick:()=>{t(!0),f(!1)},className:"w-full flex items-center space-x-3 text-gray-700 hover:text-primary-brown py-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("span",{className:"font-medium",children:"Search"})]}),s.jsx(o(),{href:"/collections?category=saree",onClick:()=>f(!1),className:"block text-gray-700 hover:text-primary-brown py-2 font-medium",children:"All Sarees"}),s.jsx(o(),{href:"/collections?category=kurti",onClick:()=>f(!1),className:"block text-gray-700 hover:text-primary-brown py-2 font-medium",children:"Kurta Set"}),s.jsx(o(),{href:"/collections?category=dupatta",onClick:()=>f(!1),className:"block text-gray-700 hover:text-primary-brown py-2 font-medium",children:"Dupatta & Stoles"}),s.jsx(o(),{href:"/sale",onClick:()=>f(!1),className:"block text-gray-700 hover:text-primary-brown py-2 font-medium",children:"Sale"}),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-3",children:"Shop by Fabric"}),(0,s.jsxs)("div",{className:"space-y-3 pl-4",children:[s.jsx(o(),{href:"/collections?category=cotton_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Cotton Sarees"}),s.jsx(o(),{href:"/collections?category=silk_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Silk Sarees"}),s.jsx(o(),{href:"/collections?category=linen_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Linen Sarees"})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-3",children:"Shop by Weave"}),(0,s.jsxs)("div",{className:"space-y-3 pl-4",children:[s.jsx(o(),{href:"/collections?category=kantha_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Kantha"}),s.jsx(o(),{href:"/collections?category=jamdani_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Jamdani"}),s.jsx(o(),{href:"/collections?category=handloom_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Handloom"}),s.jsx(o(),{href:"/collections?category=shibori_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Tie N Dye (Shibori)"}),s.jsx(o(),{href:"/collections?category=handblock_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Handblock"}),s.jsx(o(),{href:"/collections?category=batik_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Batik"}),s.jsx(o(),{href:"/collections?category=ajrakh_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Ajrakh"}),s.jsx(o(),{href:"/collections?category=khadi_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Khadi"}),s.jsx(o(),{href:"/collections?category=tissue_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Tissue"}),s.jsx(o(),{href:"/collections?category=jacquard_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Jacquard"}),s.jsx(o(),{href:"/collections?category=kota_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Kota"})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-3",children:"Shop by Variety"}),(0,s.jsxs)("div",{className:"space-y-3 pl-4",children:[s.jsx(o(),{href:"/collections?category=handloom_cotton_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Handloom Cotton"}),s.jsx(o(),{href:"/collections?category=tangail_cotton_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Tangail Cotton"}),s.jsx(o(),{href:"/collections?category=handloom_silk_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Handloom Silk"}),s.jsx(o(),{href:"/collections?category=matka_silk_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Matka Silk"}),s.jsx(o(),{href:"/collections?category=tussar_silk_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Tussar Silk"}),s.jsx(o(),{href:"/collections?category=muslin_silk_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Muslin Silk"}),s.jsx(o(),{href:"/collections?category=katan_silk_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Katan Silk"}),s.jsx(o(),{href:"/collections?category=dhakil_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Dhakil"}),s.jsx(o(),{href:"/collections?category=mulberry_silk_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Mulberry Silk"}),s.jsx(o(),{href:"/collections?category=dhonekali_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Dhonekali"}),s.jsx(o(),{href:"/collections?category=satin_silk_saree",onClick:()=>f(!1),className:"block text-sm text-gray-600 hover:text-primary-brown",children:"Satin Silk"})]})]})]})})]}),s.jsx(n,{isOpen:e,onClose:()=>t(!1)}),s.jsx(d,{isOpen:r,onClose:()=>a(!1)}),s.jsx(x,{isOpen:i,onClose:()=>u(!1)})]})}},4116:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthProvider:()=>n,useAuth:()=>i});var s=r(5344),a=r(3729),o=r(7087);let l=(0,a.createContext)();function n({children:e}){let[t,r]=(0,a.useState)(null),[n,i]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{let e=o.Z.getToken(),t=localStorage.getItem("user_data");if(console.log("\uD83D\uDD10 Auth check - Token exists:",!!e,"| SavedUser exists:",!!t),!e||!t){console.log("\uD83D\uDD10 localStorage empty, checking sessionStorage backup...");let r=sessionStorage.getItem("auth_token_backup"),s=sessionStorage.getItem("user_data_backup");r&&s&&(console.log("\uD83D\uDD10 ✅ RESTORING from sessionStorage backup!"),localStorage.setItem("auth_token",r),localStorage.setItem("user_data",s),e=r,t=s,console.log("\uD83D\uDD10 ✅ Restored user:",JSON.parse(s).email))}if(e)try{console.log("\uD83D\uDD0D Token found - verifying with API..."),console.log("   Token (first 10 chars):",e.substring(0,10)+"...");let s=await o.Z.getCurrentUser();if(console.log("✅ User verified with API:",s.email),console.log("   User ID:",s.id),console.log("   Username:",s.username),r(s),localStorage.setItem("user_data",JSON.stringify(s)),console.log("\uD83D\uDCBE Updated localStorage with verified user:",s.email),t)try{let e=JSON.parse(t);e.email!==s.email&&(console.warn("⚠️ SECURITY WARNING: localStorage had DIFFERENT user!"),console.warn("   localStorage had:",e.email),console.warn("   API verified:",s.email),console.warn("   This means auth data was stale!"),console.log("✅ FIXED: Using API-verified user:",s.email))}catch(e){}}catch(e){if(console.error("❌ API verification failed:",e),console.error("❌ Error message:",e.message),console.error("❌ Error details:",JSON.stringify(e)),e.message?.includes("401")||e.message?.includes("Unauthorized")||e.message?.includes("Invalid token"))console.log("\uD83D\uDD10 Token is TRULY invalid (401), clearing session"),o.Z.logout(),localStorage.removeItem("user_data"),r(null);else if(console.warn("⚠️ API call failed but NOT 401 - keeping session!"),console.warn("⚠️ This could be network issue, CORS, or server down"),console.warn("⚠️ Using localStorage as fallback to keep user logged in"),t)try{let e=JSON.parse(t);r(e),console.log("✅ User kept logged in from localStorage:",e.email),console.log("✅ User ID:",e.id),console.log("✅ Will retry API verification on next navigation")}catch(e){console.error("❌ Failed to parse saved user data:",e)}else console.warn("⚠️ Have token but no saved user data - keeping token"),console.warn("⚠️ Will retry to fetch user on next API call")}else console.log("ℹ️ No token found - user not logged in"),t&&(console.log("\uD83E\uDDF9 Clearing stale user data from localStorage"),localStorage.removeItem("user_data")),r(null)}catch(e){console.error("❌ Auth check failed:",e),r(null)}finally{i(!1)}})()},[]);let c=async(e,t)=>{try{console.log("\uD83D\uDD10 LOGIN ATTEMPT:",e),console.log("\uD83E\uDDF9 Clearing all previous auth data..."),localStorage.removeItem("user_data"),localStorage.removeItem("auth_token"),o.Z.setToken(null),r(null),console.log("\uD83D\uDCE1 Calling login API...");let s=await o.Z.login(e,t);console.log("✅ Login API response received, token:",s.access_token?"YES":"NO"),console.log("\uD83D\uDCE1 Fetching user data with new token...");let a=await o.Z.getCurrentUser();if(console.log("✅ User data received:",a.email),a.email.toLowerCase()!==e.toLowerCase())throw console.error("❌ SECURITY ERROR: Logged in as different user!"),console.error("   Expected:",e),console.error("   Got:",a.email),Error("Authentication mismatch - please try again");return r(a),localStorage.setItem("user_data",JSON.stringify(a)),console.log("✅ User logged in and verified:",a.email),console.log("\uD83D\uDCBE Saved to localStorage:",a.email),{success:!0,user:a}}catch(e){throw console.error("❌ Login failed:",e),localStorage.removeItem("user_data"),localStorage.removeItem("auth_token"),r(null),e}},d=async e=>{try{let t=await o.Z.register(e);return{success:!0,data:t}}catch(e){throw e}},m=async()=>{try{console.log("\uD83D\uDEAA LOGOUT - Clearing all auth data...");let e=t?.email||"unknown";await o.Z.logout(),localStorage.removeItem("user_data"),localStorage.removeItem("auth_token"),r(null),console.log("✅ User logged out:",e),console.log("\uD83E\uDDF9 All auth data cleared from localStorage")}catch(e){console.error("Logout error:",e),localStorage.removeItem("user_data"),localStorage.removeItem("auth_token"),r(null)}},u=async()=>{try{console.log("\uD83D\uDD04 Refreshing user data from API...");let e=await o.Z.getCurrentUser();return r(e),localStorage.setItem("user_data",JSON.stringify(e)),console.log("✅ User data refreshed successfully:",e.email),console.log("✅ User ID:",e.id),e}catch(t){console.error("⚠️ Failed to refresh user from API:",t);let e=localStorage.getItem("user_data");if(e)try{let t=JSON.parse(e);return console.log("⚠️ Using cached user data from localStorage:",t.email),r(t),t}catch(e){console.error("❌ Failed to parse saved user data:",e)}throw console.error("❌ No user data available - refresh failed completely"),t}};return s.jsx(l.Provider,{value:{user:t,isLoading:n,login:c,register:d,logout:m,refreshUser:u,isAuthenticated:!!t},children:e})}function i(){let e=(0,a.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},7087:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});let s=process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000";class a{constructor(){this.baseURL=s}setToken(e){}getToken(){return null}async request(e,t={}){let r=e.includes("?")?"&":"?",s=new Date().getTime(),a=`${this.baseURL}${e}${r}_t=${s}`,o=this.getToken();console.log(`📡 API Request: ${t.method||"GET"} ${e}`),o?console.log(`📡   → Using token (first 10): ${o.substring(0,10)}...`):console.log(`📡   → No token (public request)`);let l={cache:"no-store",headers:{"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0",...t.headers},...t};o&&(l.headers.Authorization=`Bearer ${o}`);try{let e=await fetch(a,l),t=await e.json();if(!e.ok){let e="API request failed";throw t.detail?e=Array.isArray(t.detail)?t.detail.map(e=>e.msg).join(", "):t.detail:t.message&&(e=t.message),Error(e)}return t}catch(e){throw console.error("API Error:",e),e}}async login(e,t){try{console.log("\uD83D\uDD10 API Service - Login attempt for:",e);let r=await this.request("/api/v1/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return r.access_token?(console.log("\uD83D\uDD10 API Service - Login successful for:",e),console.log("\uD83D\uDD10 API Service - Received token (first 10):",r.access_token.substring(0,10)+"..."),this.setToken(r.access_token),console.log("\uD83D\uDD10 API Service - Token stored in localStorage")):console.error("\uD83D\uDD10 API Service - No token in response!"),r}catch(t){throw console.error("\uD83D\uDD10 API Service - Login failed for:",e,t),t}}async register(e){return await this.request("/api/v1/auth/register",{method:"POST",body:JSON.stringify(e)})}async logout(){this.setToken(null)}async getCurrentUser(){console.log("\uD83D\uDC64 API Service - Fetching current user...");let e=await this.request("/api/v1/auth/me");return console.log("\uD83D\uDC64 API Service - Current user:",e.email),console.log("\uD83D\uDC64 API Service - User ID:",e.id),console.log("\uD83D\uDC64 API Service - Username:",e.username),e}async getProducts(e={}){let t=new URLSearchParams(e).toString();return await this.request(`/api/v1/products-fixed?${t}`)}async getAllProducts(e={}){let t=new URLSearchParams(e).toString(),r=await this.request(`/api/v1/products/${t?"?"+t:""}`);return r.items?{data:r.items.map(e=>({...e,status:e.status?e.status.replace("ProductStatus.","").toLowerCase():"draft",category:e.category?e.category.replace("Category.",""):e.category})),...r}:r}async getProduct(e){return await this.request(`/api/v1/products/${e}`)}async searchProducts(e){return await this.request(`/api/v1/products/search?q=${encodeURIComponent(e)}`)}async getCart(){return await this.request("/api/v1/cart")}async addToCart(e,t=1){return await this.request("/api/v1/cart/add",{method:"POST",body:JSON.stringify({product_id:e,quantity:t})})}async updateCartItem(e,t){return await this.request(`/api/v1/cart/update/${e}`,{method:"PUT",body:JSON.stringify({quantity:t})})}async removeFromCart(e){return await this.request(`/api/v1/cart/remove/${e}`,{method:"DELETE"})}async clearCart(){return await this.request("/api/v1/cart/clear",{method:"DELETE"})}async createOrder(e){let t={customer_name:e.customer_name,customer_email:e.customer_email,customer_phone:e.customer_phone,shipping_address:e.shipping_address,notes:e.notes||null,items:e.items.map(e=>({product_id:e.product_id,quantity:e.quantity,unit_price:parseFloat(e.price||e.unit_price)}))};return await this.request("/api/v1/orders/customer",{method:"POST",body:JSON.stringify(t)})}async getOrders(){return await this.request("/api/v1/orders")}async getOrder(e){return await this.request(`/api/v1/orders/${e}`)}async createPaymentOrder(e){return await this.request("/api/v1/payment/create-order",{method:"POST",body:JSON.stringify({order_id:e})})}async verifyPayment(e){return await this.request("/api/v1/payment/verify",{method:"POST",body:JSON.stringify(e)})}async initiatePayment(e){try{let t=await this.createOrder(e),r=await this.createPaymentOrder(t.id);return new Promise((s,a)=>{r.amount,r.currency,r.razorpay_order_id,e.customer_name,e.customer_email,e.customer_phone,a({success:!1,error:"Razorpay not loaded"})})}catch(e){throw e}}async subscribeNewsletter(e){return await this.request("/api/v1/newsletter/subscribe",{method:"POST",body:JSON.stringify({email:e})})}async submitContactForm(e){return await this.request("/api/v1/contact",{method:"POST",body:JSON.stringify(e)})}}let o=new a},9411:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,metadata:()=>g});var s=r(5036),a=r(4883),o=r.n(a);r(7272);var l=r(6843);let n=(0,l.createProxy)(String.raw`/Users/divyanshurathore/shopall/frontend/customer-website/components/CartProvider.jsx`),{__esModule:i,$$typeof:c}=n;n.default;let d=(0,l.createProxy)(String.raw`/Users/divyanshurathore/shopall/frontend/customer-website/components/CartProvider.jsx#CartProvider`);(0,l.createProxy)(String.raw`/Users/divyanshurathore/shopall/frontend/customer-website/components/CartProvider.jsx#useCart`);let m=(0,l.createProxy)(String.raw`/Users/divyanshurathore/shopall/frontend/customer-website/contexts/AuthContext.js`),{__esModule:u,$$typeof:h}=m;m.default;let x=(0,l.createProxy)(String.raw`/Users/divyanshurathore/shopall/frontend/customer-website/contexts/AuthContext.js#AuthProvider`);(0,l.createProxy)(String.raw`/Users/divyanshurathore/shopall/frontend/customer-website/contexts/AuthContext.js#useAuth`);let g={title:"Aशा - Grace Woven by Asha Dhaundiyal",description:"Discover timeless beauty with our curated collection of handwoven sarees and traditional Indian wear."};function p({children:e}){return(0,s.jsxs)("html",{lang:"en",children:[(0,s.jsxs)("head",{children:[s.jsx("meta",{httpEquiv:"Cache-Control",content:"no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0"}),s.jsx("meta",{httpEquiv:"Pragma",content:"no-cache"}),s.jsx("meta",{httpEquiv:"Expires",content:"0"}),s.jsx("script",{src:"https://checkout.razorpay.com/v1/checkout.js",async:!0})]}),s.jsx("body",{className:o().className,children:s.jsx(x,{children:s.jsx(d,{children:e})})})]})}},8211:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>a,default:()=>l});let s=(0,r(6843).createProxy)(String.raw`/Users/divyanshurathore/shopall/frontend/customer-website/app/not-found.jsx`),{__esModule:a,$$typeof:o}=s,l=s.default},7272:()=>{}};